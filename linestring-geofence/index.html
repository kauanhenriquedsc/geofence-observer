<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Turf.js Buffer Demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
    <style>
        #map { height: 90vh; }
    </style>
</head>
<body>
    <h2>Buffer em <span style="color:blueviolet">rota</span> linestring para gerar  <span style="color:blue">geocerca</span></h2>
    <div id="map"></div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <!-- Turf.js -->
    <script src="https://unpkg.com/@turf/turf@6.5.0/turf.min.js"></script>
    <script>
        var map = L.map('map').setView([-23.504243, -46.847387], 16);
        L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
            attribution: '© OpenStreetMap'
        }).addTo(map);

        var route = {
            "type": "Feature",
            "geometry": {
                "type": "LineString",
                "coordinates": [
                   [-46.838711,-23.501175],[-46.839475,-23.500977],[-46.840061,-23.500837],[-46.840666,-23.500671],[-46.842834,-23.500174],[-46.84363,-23.499979],[-46.843945,-23.499877],[-46.844733,-23.499451],[-46.845204,-23.4991],[-46.845381,-23.498989],[-46.845896,-23.498743],[-46.845931,-23.498686],[-46.845947,-23.498638],[-46.845946,-23.498583],[-46.845862,-23.498421],[-46.84567,-23.498412],[-46.845105,-23.498357],[-46.844779,-23.498267],[-46.844501,-23.498129],[-46.844235,-23.497919],[-46.844078,-23.497698],[-46.843993,-23.497549],[-46.843942,-23.497427],[-46.843864,-23.497169],[-46.843842,-23.497011],[-46.843602,-23.496088],[-46.843447,-23.495309],[-46.843374,-23.495021],[-46.842953,-23.493063],[-46.84268,-23.491789],[-46.842729,-23.491614],[-46.842758,-23.49158],[-46.842808,-23.491545],[-46.842848,-23.491528],[-46.84336,-23.491611],[-46.843647,-23.491638],[-46.84373,-23.491661],[-46.84391,-23.491744],[-46.844037,-23.491772],[-46.84532,-23.491929],[-46.846487,-23.492073],[-46.846985,-23.492131],[-46.848955,-23.492356],[-46.84898,-23.49231],[-46.849016,-23.492271],[-46.849062,-23.492242],[-46.849115,-23.492225],[-46.84917,-23.492221],[-46.849225,-23.49223],[-46.849276,-23.492251],[-46.849319,-23.492284],[-46.849351,-23.492326],[-46.849371,-23.492374],[-46.851135,-23.492614],[-46.8513,-23.492627],[-46.852136,-23.492648],[-46.852443,-23.492641],[-46.852762,-23.492603],[-46.852914,-23.492598],[-46.853087,-23.492619],[-46.853218,-23.492665],[-46.853368,-23.492756],[-46.853559,-23.492846],[-46.853777,-23.492852],[-46.854069,-23.492873],[-46.854235,-23.492896],[-46.854378,-23.492936],[-46.854545,-23.492905],[-46.854679,-23.492912],[-46.854786,-23.492943],[-46.854864,-23.492984],[-46.854954,-23.493064],[-46.854992,-23.493111],[-46.855015,-23.493175],[-46.855001,-23.493245],[-46.854929,-23.493323],[-46.854929,-23.493448],[-46.854943,-23.493581],[-46.855387,-23.494119],[-46.855984,-23.494702],[-46.856448,-23.494426],[-46.856904,-23.494108],[-46.857309,-23.493836],[-46.857876,-23.493523],[-46.858355,-23.493325],[-46.858913,-23.493159],[-46.860073,-23.492942],[-46.860868,-23.492803],[-46.861138,-23.492775],[-46.862205,-23.493018],[-46.862246,-23.493039],[-46.86227,-23.493065],[-46.862288,-23.4931],[-46.86229,-23.493205]
                ]
            }
        };
        // Criação da geocerca com 10 metros para cada lado
        var GEOFENCE_COVERAGE = 20;
        var buffered = turf.buffer(route, GEOFENCE_COVERAGE, { units: 'meters' });

        var lineLayer = L.geoJSON(route, {
            style: { color: 'purple', weight: 4, dashArray: '5, 5' }
        }).addTo(map);

        var bufferLayer = L.geoJSON(buffered, {
            style: { color: 'blue', fillOpacity: 0.2 }
        }).addTo(map);

        map.fitBounds(bufferLayer.getBounds());
    </script>
</body>
</html>
